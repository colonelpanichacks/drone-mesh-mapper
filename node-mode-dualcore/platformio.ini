; =============================================================================
; Drone Mesh Mapper - Node Mode Firmware
; colonelpanichacks
;
; Two build targets from the same project:
;   pio run -e remote_node   -> Detection node (WiFi+BLE drone scanning)
;   pio run -e home_node     -> Home receiver (UART bridge from Heltec mesh)
;
; Both target the Seeed XIAO ESP32S3 paired with a Heltec V3 (Meshtastic)
; =============================================================================

[platformio]
default_envs = remote_node, home_node

; -----------------------------------------------------------------------------
; REMOTE NODE - Detects drones via WiFi + BLE, sends JSON to Heltec V3 mesh
; -----------------------------------------------------------------------------
[env:remote_node]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino

build_flags =
    -DREMOTE_NODE
    -std=gnu++17

; Compile remote main + ODID libraries, exclude home main
build_src_filter = +<*> -<main_home.cpp>

monitor_speed = 115200
upload_speed = 921600

; -----------------------------------------------------------------------------
; HOME NODE - Receives mesh JSON from Heltec V3, forwards over USB serial
; No WiFi, no BLE, no detection - pure UART-to-USB bridge
; -----------------------------------------------------------------------------
[env:home_node]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino

build_flags =
    -DHOME_NODE
    -std=gnu++17

; Only compile the home node main - no ODID libraries needed
build_src_filter = -<*> +<main_home.cpp>

monitor_speed = 115200
upload_speed = 921600
